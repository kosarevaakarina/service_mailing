## Сервис уведомлений - сервис управления рассылками API администрирования и получения статистики.

### Сущности

* Пользователь
* Клиент
* Рассылка
* Информация о рассылках
* Общая статистика о рассылках
---
### Описание

* Настроена интеграция с внешним [сервером](https://probe.fbrq.cloud/docs)
* Настроена отложенная задача через Celery для смс-рассылки;
* Реализованы эндпоинты:
    * Добавление, просмотр, обновление и удаление пользователя;
    * Получение токена авторизации;
    * Добавление, просмотр, обновление и удаление клиента;
    * Добавление, просмотр, обновление и удаление рассылки;
    * Просмотр статистики;
    * Просмотр общей статистики по созданным рассылкам;
* Описаны права доступа:
    * Регистрироваться может любой пользователь;
    * Просматривать список пользователей может администратор;
    * Просматривать, редактировать и удалять конкретного пользователя может только сам пользователь или администратор;
    * Создавать и просматривать клиентов может авторизованный пользователь;
    * Обновлять и удалять пользователя может только тот пользователь, что его добавил;
    * Просматривать и создавать рассылки может авторизованный пользователь;
    * Обновлять, удалять и просматривать детали рассылки может только создатель;
* Реализованы валидаторы:
    * Валидация фамилии и имени пользователя;
    * Валидация номера телефона клиента;
    * Валидация создания рассылки: нельзя создавать дубли;
* Имеется список зависимостей;
* Результат проверки Flake8 равен 100%, при исключении миграций;
---
### Логика рассылки

* После создания новой рассылки, если текущее время больше времени начала и меньше времени окончания - выбираются из
  справочника все клиенты, которые подходят под значения фильтра, указанного в этой рассылке и запускается отправка для
  всех этих клиентов.
* Если создаётся рассылка с временем старта в будущем - отправка стартует автоматически по наступлению этого времени без
  дополнительных действий со стороны пользователя системы.
* По ходу отправки сообщений собирается статистика по каждому сообщению.
* Внешний сервис, который принимает отправляемые сообщения, может долго обрабатывать запрос, отвечать некорректными
---
## Дополнительные задания

* Покрытие тестами 94%;
* Обеспечена автоматическая сборка/тестирование с помощью GitLab CI;
* Подготовлен docker-compose для запуска всех сервисов проекта одной командой;
* По адресу http://localhost:8000/docs/ открывается страница со Swagger UI и в нём отображается описание разработанного
  API;
* Реализован дополнительный сервис, который раз в сутки отправляет статистику по обработанным рассылкам на email;
* Удаленный сервис может быть недоступен, долго отвечать на запросы или выдавать некорректные ответы. Поэтому 
  организована обработка ошибок и откладывание запросов при неуспехе для последующей повторной отправки;
* Обеспечена подробное логирование на всех этапах обработки запросов;
---
### Инструкция по запуску проекта в [Docker](https://github.com/kosarevaakarina/service_mailing/blob/develop/DOCKER.md)

### Инструкция по запуску проекта на [локальном хосте](https://github.com/kosarevaakarina/service_mailing/blob/develop/LOCAL.md)
